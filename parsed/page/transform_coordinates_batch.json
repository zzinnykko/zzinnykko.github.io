{"title":"localdata의 중부원점좌표(EPSG:5174)를 위/경도로 대량 변환하는 python 코드","updated":"2026-01-23","href":"/page/transform_coordinates_batch","content":"<article class=\"page\"></article> <h1 id=\"page-title\" class=\"text-12\"></h1> <p class=\"text-right\">Last updated: </p> <h2 id=\"상황\">상황</h2>\n<p><a href=\"https://www.localdata.go.kr/\">localdata</a>에 활용할만한 좋은 자료는 많은데 좌표가 중부원점좌표임, 다른 자료와 매칭할 필요가 있어 좌표를 위/경도 좌표로 변환이 필요한 상황</p>\n<h2 id=\"조치\">조치</h2>\n<p>대량으로 위/경도 변환할 필요가 있어 AI 도움을 받아 python 코드를 작성함, 아래는 외부 의존성 설치와 변환 코드</p>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\"><code><span class=\"line\"><span style=\"color:#B392F0\">pip</span><span style=\"color:#9ECBFF\"> install</span><span style=\"color:#9ECBFF\"> pandas</span></span></code></pre>\n<pre class=\"astro-code github-dark\" style=\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\" tabindex=\"0\" data-language=\"python\"><code><span class=\"line\"><span style=\"color:#F97583\">from</span><span style=\"color:#E1E4E8\"> pyproj </span><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> Transformer</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> pandas </span><span style=\"color:#F97583\">as</span><span style=\"color:#E1E4E8\"> pd</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> os</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># 초기화</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">src_tm </span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\"> \"epsg:5174\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">tar_tm </span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\"> \"epsg:4326\"</span><span style=\"color:#6A737D\">    # 위경도 좌표</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">transformer </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> Transformer.from_crs(src_tm, tar_tm, </span><span style=\"color:#FFAB70\">always_xy</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">True</span><span style=\"color:#E1E4E8\">)  </span><span style=\"color:#6A737D\"># always_xy=True --> 경도, 위도 순서로 처리</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># 소스 리드</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">source </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> pd.read_csv(</span><span style=\"color:#9ECBFF\">\"source.csv\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># 결과 파일 설정</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">output </span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\"> \"output.csv\"</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">if</span><span style=\"color:#F97583\"> not</span><span style=\"color:#E1E4E8\"> os.path.exists(output):</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    headers </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> pd.DataFrame([[</span><span style=\"color:#9ECBFF\">\"ID\"</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">\"LON\"</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">\"LAT\"</span><span style=\"color:#E1E4E8\">]])</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    headers.to_csv(output, </span><span style=\"color:#FFAB70\">mode</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">\"w\"</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">header</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">False</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">index</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">False</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">encoding</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">\"utf-8\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">def</span><span style=\"color:#B392F0\"> is_number</span><span style=\"color:#E1E4E8\">(v):</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    try</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#79B8FF\">        float</span><span style=\"color:#E1E4E8\">(v)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#79B8FF\"> True</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    except</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#79B8FF\"> False</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\"># 위/경도 구해서 결과 파일에 삽입</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">total </span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\"> len</span><span style=\"color:#E1E4E8\">(source)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">for</span><span style=\"color:#E1E4E8\"> idx, row </span><span style=\"color:#F97583\">in</span><span style=\"color:#E1E4E8\"> source.iterrows():</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    x </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> row[</span><span style=\"color:#9ECBFF\">\"X\"</span><span style=\"color:#E1E4E8\">]</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    y </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> row[</span><span style=\"color:#9ECBFF\">\"Y\"</span><span style=\"color:#E1E4E8\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> is_number(x) </span><span style=\"color:#F97583\">and</span><span style=\"color:#E1E4E8\"> is_number(y):</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        lon, lat </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> transformer.transform(x, y)</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    else</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        lon, lat </span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\"> \"\"</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">\"\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    data </span><span style=\"color:#F97583\">=</span><span style=\"color:#E1E4E8\"> pd.DataFrame([[row[</span><span style=\"color:#9ECBFF\">\"ID\"</span><span style=\"color:#E1E4E8\">], lon, lat]])</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    data.to_csv(output, </span><span style=\"color:#FFAB70\">mode</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">\"a\"</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">header</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">False</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">index</span><span style=\"color:#F97583\">=</span><span style=\"color:#79B8FF\">False</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">encoding</span><span style=\"color:#F97583\">=</span><span style=\"color:#9ECBFF\">\"utf-8\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"><span style=\"color:#79B8FF\">    print</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">f</span><span style=\"color:#9ECBFF\">\"</span><span style=\"color:#79B8FF\">{</span><span style=\"color:#E1E4E8\">idx</span><span style=\"color:#F97583\">+</span><span style=\"color:#79B8FF\">1}</span><span style=\"color:#9ECBFF\">/</span><span style=\"color:#79B8FF\">{</span><span style=\"color:#E1E4E8\">total</span><span style=\"color:#79B8FF\">}</span><span style=\"color:#9ECBFF\"> 완료\"</span><span style=\"color:#E1E4E8\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">    # if idx >= 10: break</span></span></code></pre> ","dir":"/markdown/page/dev"}
